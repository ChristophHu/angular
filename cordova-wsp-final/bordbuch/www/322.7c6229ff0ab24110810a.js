(self.webpackChunkbordbuch_wsp_final=self.webpackChunkbordbuch_wsp_final||[]).push([[322],{2322:(t,e,n)=>{"use strict";n.r(e),n.d(e,{PeilungModalComponent:()=>k});var o=n(1671),i=n(8509),l=n(114),a=n(5366),r=n(1041),u=n(6691),c=n(4438),s=n(959),m=n(3070),d=n(9550),p=n(3841),g=n(1116),f=n(8256),h=n(7064);const Z=["modalComponent"];function b(t,e){if(1&t&&(a.TgZ(0,"mat-option",22),a._uU(1),a.qZA()),2&t){const t=e.$implicit;a.Q6J("value",t.id),a.xp6(1),a.hij(" ",t.bezeichnung," ")}}function _(t,e){1&t&&a.GkF(0)}function v(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"button",25),a.NdJ("click",function(){return a.CHM(t),a.oxw(2).create()}),a._uU(1,"Erstellen"),a.qZA()}}function T(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"div"),a.TgZ(1,"button",23),a.NdJ("click",function(){return a.CHM(t),a.oxw().cancel()}),a._uU(2,"Abbrechen"),a.qZA(),a.qZA(),a.TgZ(3,"div"),a.YNc(4,v,2,0,"button",24),a.qZA()}if(2&t){const t=a.oxw();a.xp6(4),a.Q6J("ngIf",!t.peilungForm.value.id)}}let k=(()=>{class t{constructor(t,e,n,i){this._formBuilder=t,this.store=e,this.modalService=n,this.appService=i,this.title="",this.id_ship="",this.tanks$=this.store.pipe((0,o.Ys)(l.ev.selectTanks)),this.peilungForm=this._formBuilder.group({id:[],id_schiff:[],id_tank:[],bezeichnung:[],max_vol:[],vol:[],date:[],schiffsname:[]})}ngOnInit(){this.store.pipe((0,o.Ys)(l.ev.selectShipId)).subscribe(t=>{this.peilungForm.patchValue({id_schiff:t})}),this.modalService.getData().then(t=>{this.title=t.data.title,this.peilungForm.patchValue({date:t.data.date})})}setDate(){this.peilungForm.patchValue({date:(0,i.r$)(new Date)}),this.peilungForm.controls.date.markAsDirty()}selectTank(t){this.peilungForm.controls.id_tank.setValue(t),this.store.pipe((0,o.Ys)(l.ev.selectTankById(t))).subscribe(t=>{this.peilungForm.patchValue({max_vol:null==t?void 0:t.max_vol,bezeichnung:null==t?void 0:t.bezeichnung})})}create(){var t;const e=this.peilungForm.value;console.log(e),this.store.dispatch(l.KS.insertPeilung({insert:e})),null===(t=this.modal)||void 0===t||t.close()}update(){}cancel(){var t;null===(t=this.modal)||void 0===t||t.close()}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(r.qu),a.Y36(o.yh),a.Y36(u.Z),a.Y36(c.z))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-peilung-modal"]],viewQuery:function(t,e){if(1&t&&a.Gf(Z,5),2&t){let t;a.iGM(t=a.CRH())&&(e.modal=t.first)}},decls:47,vars:11,consts:[["modalComponent",""],[1,"h-16","p-8","flex","items-center","justify-between","border-b"],["tabindex","0",1,"dark:text-gray-50","focus:outline-none","text-2xl","font-semibold","leading-6","text-gray-800"],[1,"w-6","h-6","focus:outline-none","rounded-md","cursor-pointer",3,"click"],[1,"content"],[3,"formGroup"],[1,"hidden"],["appearance","fill"],["matInput","","type","text","formControlName","id","readonly",""],["matInput","","type","text","formControlName","id_schiff","readonly",""],["matInput","","type","text","formControlName","bezeichnung"],["formControlName","id_tank",3,"selectionChange"],["required","",3,"value",4,"ngFor","ngForOf"],[1,"flex","flex-row","items-center"],["matInput","","type","datetime-local","formControlName","date",3,"value"],[1,"w-6","h-6","mx-3","focus:outline-none","rounded-md","cursor-pointer",3,"click"],["name","calendar-event",1,"w-6","h-6","stroke-1","stroke-current","text-black"],["matInput","","type","number","formControlName","max_vol","readonly",""],["matInput","","type","number","formControlName","vol","required",""],[1,"absolute","h-16","px-8","right-0","bottom-0","left-0","flex","items-center","justify-between","border-t"],[4,"ngTemplateOutlet"],["toolbar",""],["required","",3,"value"],["type","button",1,"p-2","mr-3","bg-gray-800","text-white","rounded",3,"click"],["type","button","class","p-2 ml-3 bg-gray-800 text-white rounded",3,"click",4,"ngIf"],["type","button",1,"p-2","ml-3","bg-gray-800","text-white","rounded",3,"click"]],template:function(t,e){if(1&t&&(a.TgZ(0,"app-modal",null,0),a.TgZ(2,"header",1),a.TgZ(3,"p",2),a._uU(4),a.qZA(),a.TgZ(5,"button",3),a.NdJ("click",function(){return e.cancel()}),a.qZA(),a.qZA(),a.TgZ(6,"div",4),a.TgZ(7,"form",5),a.TgZ(8,"div",6),a.TgZ(9,"mat-form-field",7),a.TgZ(10,"mat-label"),a._uU(11,"id"),a.qZA(),a._UZ(12,"input",8),a.qZA(),a.TgZ(13,"mat-form-field",7),a.TgZ(14,"mat-label"),a._uU(15,"id_schiff"),a.qZA(),a._UZ(16,"input",9),a.qZA(),a.TgZ(17,"mat-form-field",7),a.TgZ(18,"mat-label"),a._uU(19,"Bezeichnung"),a.qZA(),a._UZ(20,"input",10),a.qZA(),a.qZA(),a.TgZ(21,"mat-form-field",7),a.TgZ(22,"mat-label"),a._uU(23,"Bezeichnung"),a.qZA(),a.TgZ(24,"mat-select",11),a.NdJ("selectionChange",function(t){return e.selectTank(t.value)}),a.YNc(25,b,2,2,"mat-option",12),a.ALo(26,"async"),a.qZA(),a.qZA(),a.TgZ(27,"div",13),a.TgZ(28,"mat-form-field",7),a.TgZ(29,"mat-label"),a._uU(30,"Datum/Uhrzeit"),a.qZA(),a._UZ(31,"input",14),a.ALo(32,"date"),a.qZA(),a.TgZ(33,"button",15),a.NdJ("click",function(){return e.setDate()}),a._UZ(34,"icons",16),a.qZA(),a.qZA(),a.TgZ(35,"mat-form-field",7),a.TgZ(36,"mat-label"),a._uU(37,"Maximalmenge (in L)"),a.qZA(),a._UZ(38,"input",17),a.qZA(),a.TgZ(39,"mat-form-field",7),a.TgZ(40,"mat-label"),a._uU(41,"Menge (in Liter)"),a.qZA(),a._UZ(42,"input",18),a.qZA(),a.qZA(),a.qZA(),a.TgZ(43,"footer",19),a.YNc(44,_,1,0,"ng-container",20),a.qZA(),a.qZA(),a.YNc(45,T,5,1,"ng-template",null,21,a.W1O)),2&t){const t=a.MAs(46);a.xp6(4),a.hij(" ",e.title," "),a.xp6(3),a.Q6J("formGroup",e.peilungForm),a.xp6(18),a.Q6J("ngForOf",a.lcZ(26,5,e.tanks$)),a.xp6(6),a.s9C("value",a.Dn7(32,7,e.peilungForm.value.date,"yyyy-MM-ddTHH:mm","+1:00")),a.xp6(13),a.Q6J("ngTemplateOutlet",t)}},directives:[s.z,r._Y,r.JL,r.sg,m.KE,m.hX,d.Nt,r.Fj,r.JJ,r.u,p.gD,g.sg,f._,r.wV,r.Q7,g.tP,h.ey,g.O5],pipes:[g.Ov,g.uU],styles:[".content[_ngcontent-%COMP%]{position:absolute;top:8rem;right:2rem;bottom:4rem;left:2rem;overflow:auto;-webkit-overflow-scrolling:touch;-ms-overflow-style:-ms-autohiding-scrollbar}.content[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.dark[_ngcontent-%COMP%]   .mat-form-field-ripple[_ngcontent-%COMP%], .dark[_ngcontent-%COMP%]   .mat-form-field-underline[_ngcontent-%COMP%]:before{background-color:#fff6!important}.dark[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%], .dark[_ngcontent-%COMP%]   mat-label[_ngcontent-%COMP%]{color:#d3d3d3!important}"]}),t})()}}]);