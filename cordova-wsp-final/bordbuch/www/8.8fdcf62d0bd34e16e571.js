(self.webpackChunkbordbuch_wsp_final=self.webpackChunkbordbuch_wsp_final||[]).push([[8],{5008:(t,e,o)=>{"use strict";o.r(e),o.d(e,{PositionComponent:()=>A});var i=o(8509),n=o(4020),r=o(5366),a=o(1671),l=o(1041),u=o(4268),s=o(6691),c=o(959),d=o(8256),p=o(3070),m=o(9550),f=o(1116);const Z=["modalComponent"];function g(t,e){1&t&&r.GkF(0)}function h(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"button",28),r.NdJ("click",function(){return r.CHM(t),r.oxw(2).delete()}),r._uU(1,"l\xf6schen"),r.qZA()}}function b(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"button",29),r.NdJ("click",function(){return r.CHM(t),r.oxw(2).update()}),r._uU(1,"Speichern"),r.qZA()}}function x(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"button",29),r.NdJ("click",function(){return r.CHM(t),r.oxw(2).create()}),r._uU(1,"Erstellen"),r.qZA()}}function v(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div",24),r.TgZ(1,"div"),r.TgZ(2,"button",25),r.NdJ("click",function(){return r.CHM(t),r.oxw().cancel()}),r._uU(3,"Abbrechen"),r.qZA(),r.YNc(4,h,2,0,"button",26),r.qZA(),r.TgZ(5,"div"),r.YNc(6,b,2,0,"button",27),r.YNc(7,x,2,0,"button",27),r.qZA(),r.qZA()}if(2&t){const t=r.oxw();r.xp6(4),r.Q6J("ngIf",t.positionForm.value.id),r.xp6(2),r.Q6J("ngIf",!t.positionForm.pristine&&t.positionForm.value.id),r.xp6(1),r.Q6J("ngIf",!t.positionForm.value.id)}}let A=(()=>{class t{constructor(t,e,o,i){this.store=t,this._formBuilder=e,this.locationService=o,this.modalService=i,this.title="",this.edit=!1,this.positionForm=this._formBuilder.group({id:[],id_streife:[],id_ship:[],date:[],location:this._formBuilder.group({latitude:[],longitude:[]}),description:[]})}ngOnInit(){this.modalService.getData().then(t=>{this.title=t.data.title,this.positionForm.patchValue(t.data.position)})}setCurrentLocation(){this.locationService.getCurrentPosition().then(t=>{this.positionForm.patchValue({location:{latitude:t.latitude,longitude:t.longitude}})})}setDate(){this.positionForm.patchValue({date:(0,i.r$)(new Date)}),this.positionForm.controls.date.markAsDirty()}create(){var t;console.log(this.positionForm.value),this.store.dispatch(n.xn.insertData({positionReport:this.positionForm.value})),null===(t=this.modal)||void 0===t||t.close()}update(){var t;console.log(this.positionForm.value),this.store.dispatch(n.xn.updateData({update:{id:this.positionForm.value.id,changes:this.positionForm.value}})),null===(t=this.modal)||void 0===t||t.close()}delete(){var t;this.store.dispatch(n.xn.deleteData({id:this.positionForm.value.id})),null===(t=this.modal)||void 0===t||t.close()}cancel(){var t;null===(t=this.modal)||void 0===t||t.close()}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(a.yh),r.Y36(l.qu),r.Y36(u.a),r.Y36(s.Z))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-position"]],viewQuery:function(t,e){if(1&t&&r.Gf(Z,5),2&t){let t;r.iGM(t=r.CRH())&&(e.modal=t.first)}},decls:52,vars:16,consts:[["modalComponent",""],[1,"h-16","p-8","flex","items-center","justify-between","border-b"],["tabindex","0",1,"dark:text-gray-50","focus:outline-none","text-2xl","font-semibold","leading-6","text-gray-800"],[1,"w-6","h-6","focus:outline-none","rounded-md","cursor-pointer",3,"click"],["name","x",1,"w-6","h-6","stroke-2","stroke-current","text-gray-500"],[1,"main_content","mx-5"],[3,"formGroup"],[1,"hidden"],["appearance","fill"],["matInput","","type","text","formControlName","id","readonly",""],["matInput","","type","text","formControlName","id_streife","readonly",""],["matInput","","type","text","formControlName","id_ship","readonly",""],[1,"flex","flex-row","items-center"],["matInput","","type","datetime-local","formControlName","date",3,"value"],[1,"w-6","h-6","mx-3","focus:outline-none","rounded-md","cursor-pointer",3,"click"],["name","calendar-event",1,"w-6","h-6","stroke-1","stroke-current","text-black"],["formGroupName","location",1,"grid","grid-cols-2","gap-3"],["matInput","","type","text","formControlName","latitude",3,"value"],["matInput","","type","text","formControlName","longitude",3,"value"],["name","map",1,"w-6","h-6","stroke-1","stroke-current","text-black"],["matInput","","type","text","rows","5","formControlName","description"],[1,"absolute","h-16","px-8","right-0","bottom-0","left-0","flex","items-center","justify-between","border-t"],[4,"ngTemplateOutlet"],["toolbar",""],[1,"py-3","flex","justify-between"],["type","button",1,"p-2","mr-3","bg-gray-800","text-white","rounded",3,"click"],["type","button","class","p-2 mr-3 bg-red-400 text-black rounded",3,"click",4,"ngIf"],["type","button","class","p-2 ml-3 bg-gray-800 text-white rounded",3,"click",4,"ngIf"],["type","button",1,"p-2","mr-3","bg-red-400","text-black","rounded",3,"click"],["type","button",1,"p-2","ml-3","bg-gray-800","text-white","rounded",3,"click"]],template:function(t,e){if(1&t&&(r.TgZ(0,"app-modal",null,0),r.TgZ(2,"header",1),r.TgZ(3,"p",2),r._uU(4),r.qZA(),r.TgZ(5,"button",3),r.NdJ("click",function(){return e.cancel()}),r._UZ(6,"icons",4),r.qZA(),r.qZA(),r.TgZ(7,"div",5),r.TgZ(8,"form",6),r.TgZ(9,"div",7),r.TgZ(10,"mat-form-field",8),r.TgZ(11,"mat-label"),r._uU(12,"id"),r.qZA(),r._UZ(13,"input",9),r.qZA(),r.TgZ(14,"mat-form-field",8),r.TgZ(15,"mat-label"),r._uU(16,"id_streife"),r.qZA(),r._UZ(17,"input",10),r.qZA(),r.TgZ(18,"mat-form-field",8),r.TgZ(19,"mat-label"),r._uU(20,"Id_Schiff"),r.qZA(),r._UZ(21,"input",11),r.qZA(),r.qZA(),r.TgZ(22,"div",12),r.TgZ(23,"mat-form-field",8),r.TgZ(24,"mat-label"),r._uU(25,"Datum/Uhrzeit"),r.qZA(),r._UZ(26,"input",13),r.ALo(27,"date"),r.qZA(),r.TgZ(28,"button",14),r.NdJ("click",function(){return e.setDate()}),r._UZ(29,"icons",15),r.qZA(),r.qZA(),r.TgZ(30,"div",12),r.TgZ(31,"div",16),r.TgZ(32,"mat-form-field",8),r.TgZ(33,"mat-label"),r._uU(34,"Latitude"),r.qZA(),r._UZ(35,"input",17),r.ALo(36,"number"),r.qZA(),r.TgZ(37,"mat-form-field",8),r.TgZ(38,"mat-label"),r._uU(39,"Longitude"),r.qZA(),r._UZ(40,"input",18),r.ALo(41,"number"),r.qZA(),r.qZA(),r.TgZ(42,"button",14),r.NdJ("click",function(){return e.setCurrentLocation()}),r._UZ(43,"icons",19),r.qZA(),r.qZA(),r.TgZ(44,"mat-form-field",8),r.TgZ(45,"mat-label"),r._uU(46,"Beschreibung"),r.qZA(),r._UZ(47,"textarea",20),r.qZA(),r.qZA(),r.qZA(),r.TgZ(48,"footer",21),r.YNc(49,g,1,0,"ng-container",22),r.qZA(),r.qZA(),r.YNc(50,v,8,3,"ng-template",null,23,r.W1O)),2&t){const t=r.MAs(51);r.xp6(4),r.hij(" ",e.title," "),r.xp6(4),r.Q6J("formGroup",e.positionForm),r.xp6(18),r.s9C("value",r.Dn7(27,6,e.positionForm.value.date,"yyyy-MM-ddTHH:mm","+1:00")),r.xp6(9),r.s9C("value",r.xi3(36,10,e.positionForm.value.location.latitude,"2.2-6")),r.xp6(5),r.s9C("value",r.xi3(41,13,e.positionForm.value.location.longitude,"2.2-6")),r.xp6(9),r.Q6J("ngTemplateOutlet",t)}},directives:[c.z,d._,l._Y,l.JL,l.sg,p.KE,p.hX,m.Nt,l.Fj,l.JJ,l.u,l.x0,f.tP,f.O5],pipes:[f.uU,f.JJ],styles:[""]}),t})()}}]);