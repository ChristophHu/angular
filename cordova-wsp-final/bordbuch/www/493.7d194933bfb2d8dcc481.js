(self.webpackChunkbordbuch_wsp_final=self.webpackChunkbordbuch_wsp_final||[]).push([[493],{9493:(t,e,n)=>{"use strict";n.r(e),n.d(e,{BetankungComponent:()=>y});var o=n(1671),i=n(8509),a=n(63),r=n(114),l=n(5366),u=n(1041),c=n(6691),s=n(4268),d=n(8218),m=n(959),g=n(8256),p=n(3070),f=n(9550),b=n(3841),Z=n(1116),h=n(7064);const k=["modalComponent"];function v(t,e){if(1&t&&(l.TgZ(0,"mat-option",26),l._uU(1),l.qZA()),2&t){const t=e.$implicit;l.Q6J("value",t.bezeichnung),l.xp6(1),l.hij(" ",t.bezeichnung," ")}}function A(t,e){1&t&&l.GkF(0)}function x(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"button",30),l.NdJ("click",function(){l.CHM(t);const e=l.oxw(2);return e.delete(e.betankungForm.value.id)}),l._uU(1,"l\xf6schen"),l.qZA()}}function q(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"button",31),l.NdJ("click",function(){return l.CHM(t),l.oxw(2).update()}),l._uU(1,"Speichern"),l.qZA()}}function T(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"button",31),l.NdJ("click",function(){return l.CHM(t),l.oxw(2).create()}),l._uU(1,"Erstellen"),l.qZA()}}function _(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"div"),l.TgZ(1,"button",27),l.NdJ("click",function(){return l.CHM(t),l.oxw().cancel()}),l._uU(2,"Abbrechen"),l.qZA(),l.YNc(3,x,2,0,"button",28),l.qZA(),l.TgZ(4,"div"),l.YNc(5,q,2,0,"button",29),l.YNc(6,T,2,0,"button",29),l.qZA()}if(2&t){const t=l.oxw();l.xp6(3),l.Q6J("ngIf",t.betankungForm.value.id),l.xp6(2),l.Q6J("ngIf",!t.betankungForm.pristine&&t.betankungForm.value.id),l.xp6(1),l.Q6J("ngIf",!t.betankungForm.value.id)}}let y=(()=>{class t{constructor(t,e,n,i,r){this._formBuilder=t,this.store=e,this.modalService=n,this.locationService=i,this._katFacade=r,this.title="",this.betriebsstoffe$=this.store.pipe((0,o.Ys)(a.sO.selectAllBetriebsstoffe)),this.betankungForm=this._formBuilder.group({id:[],id_ship:[],date:[],location:this._formBuilder.group({latitude:[],longitude:[]}),ort:[],fuel:[],fuelfillingquantity:[]})}ngOnInit(){this.modalService.getData().then(t=>{this.title=t.data.title,this.betankungForm.patchValue(t.data)})}setDate(){this.betankungForm.patchValue({date:(0,i.r$)(new Date)}),this.betankungForm.controls.date.markAsDirty()}setCurrentLocation(){this.locationService.getCurrentPosition().then(t=>{this.betankungForm.patchValue({location:{latitude:t.latitude,longitude:t.longitude}})})}create(){var t;const e=this.betankungForm.value;console.log(e),this.store.dispatch(r.KS.insertBetankung({insert:e})),null===(t=this.modal)||void 0===t||t.close()}update(){var t;const e={id:this.betankungForm.value.id_streife,changes:this.betankungForm.value};console.log(e),this.store.dispatch(r.KS.updateBetankung({update:e})),null===(t=this.modal)||void 0===t||t.close()}delete(t){var e;this.store.dispatch(r.KS.deleteBetankung({id:t})),null===(e=this.modal)||void 0===e||e.close()}cancel(){var t;null===(t=this.modal)||void 0===t||t.close()}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(u.qu),l.Y36(o.yh),l.Y36(c.Z),l.Y36(s.a),l.Y36(d.V))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-betankung"]],viewQuery:function(t,e){if(1&t&&l.Gf(k,5),2&t){let t;l.iGM(t=l.CRH())&&(e.modal=t.first)}},decls:58,vars:19,consts:[["modalComponent",""],[1,"h-16","p-8","flex","items-center","justify-between","border-b"],["tabindex","0",1,"dark:text-gray-50","focus:outline-none","text-2xl","font-semibold","leading-6","text-gray-800"],[1,"w-6","h-6","focus:outline-none","rounded-md","cursor-pointer",3,"click"],["name","x",1,"w-6","h-6","stroke-2","stroke-current","text-gray-500"],[1,"content"],[3,"formGroup"],[1,"hidden"],["appearance","fill"],["matInput","","type","text","formControlName","id","readonly",""],["matInput","","type","text","formControlName","id_ship","readonly",""],[1,"flex","flex-row","items-center"],["matInput","","type","datetime-local","formControlName","date",3,"value"],[1,"w-6","h-6","mx-3","focus:outline-none","rounded-md","cursor-pointer",3,"click"],["name","calendar-event",1,"w-6","h-6","stroke-1","stroke-current","text-black"],["formGroupName","location",1,"grid","grid-cols-2","gap-3"],["matInput","","type","text","formControlName","latitude",3,"value"],["matInput","","type","text","formControlName","longitude",3,"value"],["name","map",1,"w-6","h-6","stroke-1","stroke-current","text-black"],["matInput","","type","text","formControlName","ort"],["formControlName","fuel"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","number","formControlName","fuelfillingquantity"],[1,"absolute","h-16","px-8","right-0","bottom-0","left-0","flex","items-center","justify-between","border-t"],[4,"ngTemplateOutlet"],["toolbar",""],[3,"value"],["type","button",1,"p-2","mr-3","bg-gray-800","text-white","rounded",3,"click"],["type","button","class","p-2 mr-3 bg-red-400 text-black rounded",3,"click",4,"ngIf"],["type","button","class","p-2 ml-3 bg-gray-800 text-white rounded",3,"click",4,"ngIf"],["type","button",1,"p-2","mr-3","bg-red-400","text-black","rounded",3,"click"],["type","button",1,"p-2","ml-3","bg-gray-800","text-white","rounded",3,"click"]],template:function(t,e){if(1&t&&(l.TgZ(0,"app-modal",null,0),l.TgZ(2,"header",1),l.TgZ(3,"p",2),l._uU(4),l.qZA(),l.TgZ(5,"button",3),l.NdJ("click",function(){return e.cancel()}),l._UZ(6,"icons",4),l.qZA(),l.qZA(),l.TgZ(7,"div",5),l.TgZ(8,"form",6),l.TgZ(9,"div",7),l.TgZ(10,"mat-form-field",8),l.TgZ(11,"mat-label"),l._uU(12,"id"),l.qZA(),l._UZ(13,"input",9),l.qZA(),l.TgZ(14,"mat-form-field",8),l.TgZ(15,"mat-label"),l._uU(16,"id_ship"),l.qZA(),l._UZ(17,"input",10),l.qZA(),l.qZA(),l.TgZ(18,"div",11),l.TgZ(19,"mat-form-field",8),l.TgZ(20,"mat-label"),l._uU(21,"Datum/Uhrzeit"),l.qZA(),l._UZ(22,"input",12),l.ALo(23,"date"),l.qZA(),l.TgZ(24,"button",13),l.NdJ("click",function(){return e.setDate()}),l._UZ(25,"icons",14),l.qZA(),l.qZA(),l.TgZ(26,"div",11),l.TgZ(27,"div",15),l.TgZ(28,"mat-form-field",8),l.TgZ(29,"mat-label"),l._uU(30,"Latitude"),l.qZA(),l._UZ(31,"input",16),l.ALo(32,"number"),l.qZA(),l.TgZ(33,"mat-form-field",8),l.TgZ(34,"mat-label"),l._uU(35,"Longitude"),l.qZA(),l._UZ(36,"input",17),l.ALo(37,"number"),l.qZA(),l.qZA(),l.TgZ(38,"button",13),l.NdJ("click",function(){return e.setCurrentLocation()}),l._UZ(39,"icons",18),l.qZA(),l.qZA(),l.TgZ(40,"mat-form-field",8),l.TgZ(41,"mat-label"),l._uU(42,"Ortsbezeichnung"),l.qZA(),l._UZ(43,"input",19),l.qZA(),l.TgZ(44,"mat-form-field",8),l.TgZ(45,"mat-label"),l._uU(46,"Was wurde getankt"),l.qZA(),l.TgZ(47,"mat-select",20),l.YNc(48,v,2,2,"mat-option",21),l.ALo(49,"async"),l.qZA(),l.qZA(),l.TgZ(50,"mat-form-field",8),l.TgZ(51,"mat-label"),l._uU(52,"Menge (in Liter)"),l.qZA(),l._UZ(53,"input",22),l.qZA(),l.qZA(),l.qZA(),l.TgZ(54,"footer",23),l.YNc(55,A,1,0,"ng-container",24),l.qZA(),l.qZA(),l.YNc(56,_,7,3,"ng-template",null,25,l.W1O)),2&t){const t=l.MAs(57);l.xp6(4),l.hij(" ",e.title," "),l.xp6(4),l.Q6J("formGroup",e.betankungForm),l.xp6(14),l.s9C("value",l.Dn7(23,7,e.betankungForm.value.date,"yyyy-MM-ddTHH:mm","+1:00")),l.xp6(9),l.s9C("value",l.xi3(32,11,e.betankungForm.value.location.latitude,"2.2-6")),l.xp6(5),l.s9C("value",l.xi3(37,14,e.betankungForm.value.location.longitude,"2.2-6")),l.xp6(12),l.Q6J("ngForOf",l.lcZ(49,17,e.betriebsstoffe$)),l.xp6(7),l.Q6J("ngTemplateOutlet",t)}},directives:[m.z,g._,u._Y,u.JL,u.sg,p.KE,p.hX,f.Nt,u.Fj,u.JJ,u.u,u.x0,b.gD,Z.sg,u.wV,Z.tP,h.ey,Z.O5],pipes:[Z.uU,Z.JJ,Z.Ov],styles:[".content{position:absolute;top:8rem;right:2rem;bottom:4rem;left:2rem;overflow:auto;-webkit-overflow-scrolling:touch;-ms-overflow-style:-ms-autohiding-scrollbar}.content::-webkit-scrollbar{display:none}.dark .mat-form-field-ripple,.dark .mat-form-field-underline:before{background-color:#fff6!important}.dark .mat-select-value,.dark mat-label{color:#d3d3d3!important}"],encapsulation:2}),t})()}}]);