(self.webpackChunkbordbuch_wsp_final=self.webpackChunkbordbuch_wsp_final||[]).push([[524],{5524:(t,e,o)=>{"use strict";o.r(e),o.d(e,{BesatzungComponent:()=>T});var n=o(1671),r=o(8509),a=o(63),i=o(114),l=o(5366),u=o(1041),s=o(6691),c=o(4438),d=o(959),m=o(8256),g=o(3070),p=o(9550),f=o(3841),b=o(1116),Z=o(7064);const h=["modalComponent"];function v(t,e){if(1&t&&(l.TgZ(0,"mat-option",23),l._uU(1),l.qZA()),2&t){const t=e.$implicit;l.Q6J("value",t.bezeichnung),l.xp6(1),l.hij(" ",t.bezeichnung," ")}}function A(t,e){1&t&&l.GkF(0)}function _(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"button",27),l.NdJ("click",function(){l.CHM(t);const e=l.oxw(2);return e.delete(e.besatzungForm.value.id)}),l._uU(1,"l\xf6schen"),l.qZA()}}function k(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"button",28),l.NdJ("click",function(){return l.CHM(t),l.oxw(2).update()}),l._uU(1,"Speichern"),l.qZA()}}function y(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"button",28),l.NdJ("click",function(){return l.CHM(t),l.oxw(2).create()}),l._uU(1,"Erstellen"),l.qZA()}}function x(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"div"),l.TgZ(1,"button",24),l.NdJ("click",function(){return l.CHM(t),l.oxw().cancel()}),l._uU(2,"Abbrechen"),l.qZA(),l.YNc(3,_,2,0,"button",25),l.qZA(),l.TgZ(4,"div"),l.YNc(5,k,2,0,"button",26),l.YNc(6,y,2,0,"button",26),l.qZA()}if(2&t){const t=l.oxw();l.xp6(3),l.Q6J("ngIf",t.besatzungForm.value.id),l.xp6(2),l.Q6J("ngIf",!t.besatzungForm.pristine&&t.besatzungForm.value.id),l.xp6(1),l.Q6J("ngIf",!t.besatzungForm.value.id)}}let T=(()=>{class t{constructor(t,e,o,r){this._formBuilder=t,this.store=e,this.modalService=o,this.appService=r,this.title="",this.edit=!1,this.funktionen$=this.store.pipe((0,n.Ys)(a.sO.selectAllFunktionen)),this.besatzungForm=this._formBuilder.group({id:[],id_streife:[],funktion:[],persnr:[],name:[],an_bord:[""],von_bord:[""]})}get form(){return this.besatzungForm.controls}ngOnInit(){this.modalService.getData().then(t=>{this.title=t.data.title,console.log(t.data.besatzung),this.besatzungForm.patchValue(t.data.besatzung),console.log(this.besatzungForm.value)})}setAnBordDate(){this.besatzungForm.patchValue({an_bord:(0,r.r$)(new Date)}),this.besatzungForm.controls.an_bord.markAsDirty()}setVonBordDate(){this.besatzungForm.patchValue({von_bord:(0,r.r$)(new Date)}),this.besatzungForm.controls.von_bord.markAsDirty()}create(){var t;const e=this.besatzungForm.value;console.log(e),this.store.dispatch(i.KS.insertPatrolBesatzung({insert:e})),null===(t=this.modal)||void 0===t||t.close()}update(){var t;this.store.dispatch(i.KS.updatePatrolBesatzung({update:{id:this.besatzungForm.value.id_streife,changes:this.besatzungForm.value}})),null===(t=this.modal)||void 0===t||t.close()}delete(t){var e;this.store.dispatch(i.KS.deletePatrolBesatzung({id:t})),null===(e=this.modal)||void 0===e||e.close()}cancel(){var t;null===(t=this.modal)||void 0===t||t.close()}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(u.qu),l.Y36(n.yh),l.Y36(s.Z),l.Y36(c.z))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-besatzung"]],viewQuery:function(t,e){if(1&t&&l.Gf(h,5),2&t){let t;l.iGM(t=l.CRH())&&(e.modal=t.first)}},decls:52,vars:16,consts:[["modalComponent",""],[1,"h-16","p-8","flex","items-center","justify-between","border-b"],["tabindex","0",1,"dark:text-gray-50","focus:outline-none","text-2xl","font-semibold","leading-6","text-gray-800"],[1,"w-6","h-6","focus:outline-none","rounded-md","cursor-pointer",3,"click"],["name","x",1,"w-6","h-6","stroke-2","stroke-current","text-gray-500"],[1,"content"],[3,"formGroup"],[1,"hidden"],["appearance","fill"],["matInput","","type","text","formControlName","id","readonly",""],["matInput","","type","text","formControlName","id_streife","readonly",""],["matInput","","type","text","formControlName","name"],["matInput","","type","text","formControlName","persnr"],["formControlName","funktion"],[3,"value",4,"ngFor","ngForOf"],[1,"flex","flex-row","items-center"],["matInput","","type","datetime-local","formControlName","an_bord",3,"value"],[1,"w-6","h-6","mx-3","focus:outline-none","rounded-md","cursor-pointer",3,"click"],["name","calendar-event",1,"w-6","h-6","stroke-1","stroke-current","text-black"],["matInput","","type","datetime-local","formControlName","von_bord",3,"value"],[1,"absolute","h-16","px-8","right-0","bottom-0","left-0","flex","items-center","justify-between","border-t"],[4,"ngTemplateOutlet"],["toolbar",""],[3,"value"],["type","button",1,"p-2","mr-3","bg-gray-800","text-white","rounded",3,"click"],["type","button","class","p-2 mr-3 bg-red-400 text-black rounded",3,"click",4,"ngIf"],["type","button","class","p-2 ml-3 bg-gray-800 text-white rounded",3,"click",4,"ngIf"],["type","button",1,"p-2","mr-3","bg-red-400","text-black","rounded",3,"click"],["type","button",1,"p-2","ml-3","bg-gray-800","text-white","rounded",3,"click"]],template:function(t,e){if(1&t&&(l.TgZ(0,"app-modal",null,0),l.TgZ(2,"header",1),l.TgZ(3,"p",2),l._uU(4),l.qZA(),l.TgZ(5,"button",3),l.NdJ("click",function(){return e.cancel()}),l._UZ(6,"icons",4),l.qZA(),l.qZA(),l.TgZ(7,"div",5),l.TgZ(8,"form",6),l.TgZ(9,"div",7),l.TgZ(10,"mat-form-field",8),l.TgZ(11,"mat-label"),l._uU(12,"id"),l.qZA(),l._UZ(13,"input",9),l.qZA(),l.TgZ(14,"mat-form-field",8),l.TgZ(15,"mat-label"),l._uU(16,"id_streife"),l.qZA(),l._UZ(17,"input",10),l.qZA(),l.qZA(),l.TgZ(18,"mat-form-field",8),l.TgZ(19,"mat-label"),l._uU(20,"Name"),l.qZA(),l._UZ(21,"input",11),l.qZA(),l.TgZ(22,"mat-form-field",8),l.TgZ(23,"mat-label"),l._uU(24,"Personalnummer"),l.qZA(),l._UZ(25,"input",12),l.qZA(),l.TgZ(26,"mat-form-field",8),l.TgZ(27,"mat-label"),l._uU(28,"Funktion"),l.qZA(),l.TgZ(29,"mat-select",13),l.YNc(30,v,2,2,"mat-option",14),l.ALo(31,"async"),l.qZA(),l.qZA(),l.TgZ(32,"div",15),l.TgZ(33,"mat-form-field",8),l.TgZ(34,"mat-label"),l._uU(35,"An Bord"),l.qZA(),l._UZ(36,"input",16),l.ALo(37,"date"),l.qZA(),l.TgZ(38,"button",17),l.NdJ("click",function(){return e.setAnBordDate()}),l._UZ(39,"icons",18),l.qZA(),l.qZA(),l.TgZ(40,"div",15),l.TgZ(41,"mat-form-field",8),l.TgZ(42,"mat-label"),l._uU(43,"Von Bord"),l.qZA(),l._UZ(44,"input",19),l.ALo(45,"date"),l.qZA(),l.TgZ(46,"button",17),l.NdJ("click",function(){return e.setVonBordDate()}),l._UZ(47,"icons",18),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(48,"footer",20),l.YNc(49,A,1,0,"ng-container",21),l.qZA(),l.qZA(),l.YNc(50,x,7,3,"ng-template",null,22,l.W1O)),2&t){const t=l.MAs(51);l.xp6(4),l.hij(" ",e.title," "),l.xp6(4),l.Q6J("formGroup",e.besatzungForm),l.xp6(22),l.Q6J("ngForOf",l.lcZ(31,6,e.funktionen$)),l.xp6(6),l.s9C("value",l.Dn7(37,8,e.besatzungForm.value.an_bord,"yyyy-MM-ddTHH:mm","+1:00")),l.xp6(8),l.s9C("value",l.Dn7(45,12,e.besatzungForm.value.von_bord,"yyyy-MM-ddTHH:mm","+1:00")),l.xp6(5),l.Q6J("ngTemplateOutlet",t)}},directives:[d.z,m._,u._Y,u.JL,u.sg,g.KE,g.hX,p.Nt,u.Fj,u.JJ,u.u,f.gD,b.sg,b.tP,Z.ey,b.O5],pipes:[b.Ov,b.uU],styles:[".content{position:absolute;top:8rem;right:2rem;bottom:4rem;left:2rem;overflow:auto;-webkit-overflow-scrolling:touch;-ms-overflow-style:-ms-autohiding-scrollbar}.content::-webkit-scrollbar{display:none}.dark .mat-form-field-ripple,.dark .mat-form-field-underline:before{background-color:#fff6!important}.dark .mat-select-value,.dark mat-label{color:#d3d3d3!important}"],encapsulation:2}),t})()}}]);