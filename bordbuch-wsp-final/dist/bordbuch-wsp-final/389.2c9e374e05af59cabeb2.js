(self.webpackChunkbordbuch_wsp_final=self.webpackChunkbordbuch_wsp_final||[]).push([[389],{3389:(t,e,n)=>{"use strict";n.r(e),n.d(e,{BetankungModalComponent:()=>q});var o=n(8509),a=n(5366),i=n(1041),r=n(3063),l=n(8218),u=n(6691),c=n(4268),d=n(959),m=n(8256),s=n(3070),g=n(9550),f=n(3841),p=n(1116),b=n(7064),Z=n(2998);const h=["modalComponent"];function k(t,e){if(1&t&&(a.TgZ(0,"mat-option",27),a._uU(1),a.qZA()),2&t){const t=e.$implicit;a.Q6J("value",t.bezeichnung),a.xp6(1),a.hij(" ",t.bezeichnung," ")}}function _(t,e){1&t&&a.GkF(0)}function v(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"button",31),a.NdJ("click",function(){a.CHM(t);const e=a.oxw(2);return e.delete(e.betankungForm.value.id)}),a._uU(1,"l\xf6schen"),a.qZA()}}function x(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"button",32),a.NdJ("click",function(){return a.CHM(t),a.oxw(2).update()}),a._uU(1,"Speichern"),a.qZA()}}function A(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"button",32),a.NdJ("click",function(){return a.CHM(t),a.oxw(2).create()}),a._uU(1,"Erstellen"),a.qZA()}}function T(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"div"),a.TgZ(1,"button",28),a.NdJ("click",function(){return a.CHM(t),a.oxw().cancel()}),a._uU(2,"Abbrechen"),a.qZA(),a.YNc(3,v,2,0,"button",29),a.qZA(),a.TgZ(4,"div"),a.YNc(5,x,2,0,"button",30),a.YNc(6,A,2,0,"button",30),a.qZA()}if(2&t){const t=a.oxw();a.xp6(3),a.Q6J("ngIf",t.betankungForm.value.id),a.xp6(2),a.Q6J("ngIf",t.betankungForm.dirty&&t.betankungForm.value.id),a.xp6(1),a.Q6J("ngIf",t.betankungForm.dirty&&!t.betankungForm.value.id)}}let q=(()=>{class t{constructor(t,e,n,o,a){this._formBuilder=t,this._specFacade=e,this._katFacade=n,this.modalService=o,this.locationService=a,this.title="",this.betriebsstoffe$=this._katFacade.betriebsstoffe$,this.betankungForm=this._formBuilder.group({id:[],id_ship:[],date:[],location:this._formBuilder.group({latitude:[0],longitude:[0]}),ort:[],fuel:[],fuelfillingquantity:[]})}ngOnInit(){this.modalService.getData().then(t=>{this.title=t.data.title,this.betankungForm.patchValue(t.data)})}setDate(){this.betankungForm.patchValue({date:(0,o.eT)("now")}),this.betankungForm.markAsDirty()}setCurrentLocation(){this.locationService.getCurrentPosition().then(t=>{this.betankungForm.patchValue({location:{latitude:t.latitude,longitude:t.longitude}})})}clearLocation(){this.betankungForm.patchValue({location:{latitude:0,longitude:0}}),this.betankungForm.markAsDirty()}create(){var t;this._specFacade.insertBetankung(this.betankungForm.value),null===(t=this.modal)||void 0===t||t.close()}update(){var t;this._specFacade.updateBetankung(this.betankungForm.value),null===(t=this.modal)||void 0===t||t.close()}delete(t){var e;this._specFacade.deleteBetankung(t),null===(e=this.modal)||void 0===e||e.close()}cancel(){var t;null===(t=this.modal)||void 0===t||t.close()}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(i.qu),a.Y36(r.C),a.Y36(l.V),a.Y36(u.Z),a.Y36(c.a))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-betankung-modal"]],viewQuery:function(t,e){if(1&t&&a.Gf(h,5),2&t){let t;a.iGM(t=a.CRH())&&(e.modal=t.first)}},decls:61,vars:21,consts:[["modalComponent",""],[1,"h-16","p-8","flex","items-center","justify-between","border-b"],["tabindex","0",1,"dark:text-gray-50","focus:outline-none","text-2xl","font-semibold","leading-6","text-gray-800"],[1,"w-6","h-6","focus:outline-none","rounded-md","cursor-pointer",3,"click"],["name","x",1,"w-6","h-6","stroke-2","stroke-current","text-gray-500"],[1,"content"],[3,"formGroup"],[1,""],["appearance","fill"],["matInput","","type","text","formControlName","id","readonly",""],["matInput","","type","text","formControlName","id_ship","readonly",""],[1,"flex","flex-row","items-center"],["formGroupName","location",1,"grid","grid-cols-2","gap-3"],["matInput","","type","text","formControlName","latitude",3,"value"],["matInput","","type","text","formControlName","longitude",3,"value"],[1,"w-6","h-6","mx-3","focus:outline-none","rounded-md","cursor-pointer",3,"click"],["name","map",1,"w-6","h-6","stroke-1","stroke-current","text-black"],["name","minus-circle",1,"w-6","h-6","stroke-1","stroke-current","text-black"],["matInput","","type","datetime-local","formControlName","date",3,"value"],["name","calendar-event",1,"w-6","h-6","stroke-1","stroke-current","text-black"],["matInput","","type","text","formControlName","ort"],["formControlName","fuel"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","number","formControlName","fuelfillingquantity"],[1,"absolute","h-16","px-8","right-0","bottom-0","left-0","flex","items-center","justify-between","border-t"],[4,"ngTemplateOutlet"],["toolbar",""],[3,"value"],["type","button",1,"p-2","mr-3","bg-gray-800","text-white","rounded",3,"click"],["type","button","class","p-2 mr-3 bg-red-400 text-black rounded",3,"click",4,"ngIf"],["type","button","class","p-2 ml-3 bg-gray-800 text-white rounded",3,"click",4,"ngIf"],["type","button",1,"p-2","mr-3","bg-red-400","text-black","rounded",3,"click"],["type","button",1,"p-2","ml-3","bg-gray-800","text-white","rounded",3,"click"]],template:function(t,e){if(1&t&&(a.TgZ(0,"app-modal",null,0),a.TgZ(2,"header",1),a.TgZ(3,"p",2),a._uU(4),a.qZA(),a.TgZ(5,"button",3),a.NdJ("click",function(){return e.cancel()}),a._UZ(6,"icons",4),a.qZA(),a.qZA(),a.TgZ(7,"div",5),a.TgZ(8,"form",6),a.TgZ(9,"div",7),a.TgZ(10,"mat-form-field",8),a.TgZ(11,"mat-label"),a._uU(12,"id"),a.qZA(),a._UZ(13,"input",9),a.qZA(),a.TgZ(14,"mat-form-field",8),a.TgZ(15,"mat-label"),a._uU(16,"id_ship"),a.qZA(),a._UZ(17,"input",10),a.qZA(),a.TgZ(18,"div",11),a.TgZ(19,"div",12),a.TgZ(20,"mat-form-field",8),a.TgZ(21,"mat-label"),a._uU(22,"Latitude"),a.qZA(),a._UZ(23,"input",13),a.ALo(24,"number"),a.qZA(),a.TgZ(25,"mat-form-field",8),a.TgZ(26,"mat-label"),a._uU(27,"Longitude"),a.qZA(),a._UZ(28,"input",14),a.ALo(29,"number"),a.qZA(),a.qZA(),a.TgZ(30,"button",15),a.NdJ("click",function(){return e.setCurrentLocation()}),a._UZ(31,"icons",16),a.qZA(),a.TgZ(32,"button",15),a.NdJ("click",function(){return e.clearLocation()}),a._UZ(33,"icons",17),a.qZA(),a.qZA(),a.qZA(),a.TgZ(34,"div",11),a.TgZ(35,"mat-form-field",8),a.TgZ(36,"mat-label"),a._uU(37,"Datum/Uhrzeit"),a.qZA(),a._UZ(38,"input",18),a.ALo(39,"date"),a.qZA(),a.TgZ(40,"button",15),a.NdJ("click",function(){return e.setDate()}),a._UZ(41,"icons",19),a.qZA(),a.qZA(),a.TgZ(42,"mat-form-field",8),a.TgZ(43,"mat-label"),a._uU(44,"Ortsbezeichnung"),a.qZA(),a._UZ(45,"input",20),a.qZA(),a.TgZ(46,"mat-form-field",8),a.TgZ(47,"mat-label"),a._uU(48,"Was wurde getankt"),a.qZA(),a.TgZ(49,"mat-select",21),a.YNc(50,k,2,2,"mat-option",22),a.ALo(51,"orderBy"),a.ALo(52,"async"),a.qZA(),a.qZA(),a.TgZ(53,"mat-form-field",8),a.TgZ(54,"mat-label"),a._uU(55,"Menge (in Liter)"),a.qZA(),a._UZ(56,"input",23),a.qZA(),a.qZA(),a.qZA(),a.TgZ(57,"footer",24),a.YNc(58,_,1,0,"ng-container",25),a.qZA(),a.qZA(),a.YNc(59,T,7,3,"ng-template",null,26,a.W1O)),2&t){const t=a.MAs(60);a.xp6(4),a.hij(" ",e.title," "),a.xp6(4),a.Q6J("formGroup",e.betankungForm),a.xp6(15),a.s9C("value",a.xi3(24,7,e.betankungForm.value.location.latitude,"2.2-6")),a.xp6(5),a.s9C("value",a.xi3(29,10,e.betankungForm.value.location.longitude,"2.2-6")),a.xp6(10),a.s9C("value",a.xi3(39,13,e.betankungForm.value.date,"yyyy-MM-ddTHH:mm")),a.xp6(12),a.Q6J("ngForOf",a.xi3(51,16,a.lcZ(52,19,e.betriebsstoffe$),"bezeichnung")),a.xp6(8),a.Q6J("ngTemplateOutlet",t)}},directives:[d.z,m._,i._Y,i.JL,i.sg,s.KE,s.hX,g.Nt,i.Fj,i.JJ,i.u,i.x0,f.gD,p.sg,i.wV,p.tP,b.ey,p.O5],pipes:[p.JJ,p.uU,Z.d,p.Ov],styles:[".content[_ngcontent-%COMP%]{position:absolute;top:8rem;right:2rem;bottom:4rem;left:2rem;overflow:auto;-webkit-overflow-scrolling:touch;-ms-overflow-style:-ms-autohiding-scrollbar}.content[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.dark[_ngcontent-%COMP%]   .mat-form-field-ripple[_ngcontent-%COMP%], .dark[_ngcontent-%COMP%]   .mat-form-field-underline[_ngcontent-%COMP%]:before{background-color:#fff6!important}.dark[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%], .dark[_ngcontent-%COMP%]   mat-label[_ngcontent-%COMP%]{color:#d3d3d3!important}"]}),t})()}}]);