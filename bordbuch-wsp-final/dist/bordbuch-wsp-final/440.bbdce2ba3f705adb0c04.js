(self.webpackChunkbordbuch_wsp_final=self.webpackChunkbordbuch_wsp_final||[]).push([[440],{1440:(e,t,i)=>{"use strict";i.r(t),i.d(t,{ChecklistItemsComponent:()=>q});var n=i(611),c=i(8509),r=i(5366),o=i(3063),a=i(6691),s=i(959);const l=["*"];let d=(()=>{class e{constructor(){this.infoButtonClicked=new r.vpe}toggleInfoByClick(){this.infoButtonClicked.emit()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-info-button"]],outputs:{infoButtonClicked:"infoButtonClicked"},ngContentSelectors:l,decls:2,vars:0,consts:[[1,"w-6","h-6","text-center",3,"click"]],template:function(e,t){1&e&&(r.F$t(),r.TgZ(0,"div",0),r.NdJ("click",function(){return t.toggleInfoByClick()}),r.Hsn(1),r.qZA())},styles:[".info-icon[_ngcontent-%COMP%]{cursor:pointer;font-size:16px;margin-left:8px;height:16px}"]}),e})();var h=i(5333),u=i(5416),g=i(5959),p=i(2151);let m=(()=>{class e{constructor(e,t,i){this.infoButton=e,this.overlay=t,this.vcr=i,this.unsubscribe=new g.xQ}ngOnInit(){this.createOverlay()}ngAfterViewInit(){this.infoButton.infoButtonClicked.asObservable().subscribe(()=>{this.attachOverlay()})}ngOnDestroy(){this.detachOverlay(),this.unsubscribe.next({}),this.unsubscribe.complete()}createOverlay(){const e=this.overlay.scrollStrategies.reposition(),t=this.overlay.position().flexibleConnectedTo(this.label).withPositions([new h.tR({originX:"end",originY:"bottom"},{overlayX:"end",overlayY:"top"}),new h.tR({originX:"end",originY:"top"},{overlayX:"end",overlayY:"bottom"})]).withPush(!1);this.overlayRef=this.overlay.create({positionStrategy:t,scrollStrategy:e,hasBackdrop:!0}),this.overlayRef.backdropClick().pipe((0,u.R)(this.unsubscribe)).subscribe(()=>{this.detachOverlay()})}attachOverlay(){if(!this.overlayRef.hasAttached()){const e=new p.UE(this.appInfoPopup,this.vcr);this.overlayRef.attach(e)}}detachOverlay(){this.overlayRef.hasAttached()&&this.overlayRef.detach()}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(d,1),r.Y36(h.aV),r.Y36(r.s_b))},e.\u0275dir=r.lG2({type:e,selectors:[["","appInfoPopup",""]],inputs:{appInfoPopup:"appInfoPopup",label:"label"}}),e})();var b=i(8256),k=i(1116);const f=["modalComponent"];function y(e,t){1&e&&(r.TgZ(0,"div",24),r._uU(1," Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed non risus. Suspendisse lectus tortor, dignissim sit amet, adipiscing nec, ultricies sed, dolor. Cras elementum ultrices diam. Maecenas ligula massa, varius a, semper congue, euismod non, mi. Proin porttitor, orci nec nonummy molestie, enim est eleifend mi, non fermentum diam nisl sit amet erat. Duis semper. Duis arcu massa, scelerisque vitae, consequat in, pretium a, enim. Pellentesque congue. "),r.qZA())}function x(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"tr",25),r.TgZ(1,"td",26),r._uU(2),r.qZA(),r.TgZ(3,"td",27),r.TgZ(4,"input",28),r.NdJ("change",function(){const t=r.CHM(e).$implicit;return r.oxw().toggleitem(t)}),r.qZA(),r.qZA(),r.TgZ(5,"td",29),r._uU(6),r.qZA(),r.TgZ(7,"td",30),r.TgZ(8,"button",31),r.TgZ(9,"icons",32),r.NdJ("click",function(){const t=r.CHM(e).$implicit;return r.oxw().benachrichtigen(t)}),r.qZA(),r.qZA(),r.qZA(),r.qZA()}if(2&e){const e=t.$implicit;r.xp6(2),r.hij(" ",e.id," "),r.xp6(2),r.Q6J("checked",e.checked),r.xp6(1),r.Q6J("ngClass",e.relevant?"underline":""),r.xp6(1),r.hij(" ",e.bezeichnung," ")}}function Z(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"tr",33),r.TgZ(1,"td",26),r._uU(2),r.qZA(),r.TgZ(3,"td",27),r.TgZ(4,"input",28),r.NdJ("change",function(){const t=r.CHM(e).$implicit;return r.oxw().toggleitem(t)}),r.qZA(),r.qZA(),r.TgZ(5,"td",34),r._uU(6),r.qZA(),r._UZ(7,"td",30),r.qZA()}if(2&e){const e=t.$implicit;r.xp6(2),r.hij(" ",e.id," "),r.xp6(2),r.Q6J("checked",e.checked),r.xp6(2),r.hij(" ",e.bezeichnung," ")}}function w(e,t){1&e&&r.GkF(0)}function v(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"button",37),r.NdJ("click",function(){return r.CHM(e),r.oxw(2).create()}),r._uU(1,"Speichern"),r.qZA()}}function A(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div"),r.TgZ(1,"button",35),r.NdJ("click",function(){return r.CHM(e),r.oxw().create()}),r._uU(2,"Schlie\xdfen"),r.qZA(),r.qZA(),r.TgZ(3,"div"),r.YNc(4,v,2,0,"button",36),r.qZA()}if(2&e){const e=r.oxw();r.xp6(4),r.Q6J("ngIf",e.edit)}}let q=(()=>{class e{constructor(e,t){this._specFacade=e,this.modalService=t,this.title="",this.edit=!1,this.allCheck=!0,this.patrolId=""}ngOnInit(){this._specFacade.patrol$.subscribe(e=>this.patrolId=e.id),this.checked$=this._specFacade.checklistItemsChecked$,this.unchecked$=this._specFacade.checklistItemsUnchecked$,this.modalService.getData().then(e=>{this.title=e.data.title}),this._specFacade.checklist$.subscribe(e=>{this.checklist=e})}toggleCheck(){this.allCheck=!this.allCheck,this.allCheck?this.unchecked$.pipe((0,n.q)(1)).subscribe(e=>{e.forEach(e=>e.checked=this.allCheck)}):this.checked$.pipe((0,n.q)(1)).subscribe(e=>{e.forEach(e=>e.checked=this.allCheck)})}toggleitem(e){var t;this.edit=!0;const i=Object.assign({},e,{checked:!e.checked}),n=Object.assign({},this.checklist),c=null===(t=this.checklist.checklistItems)||void 0===t?void 0:t.filter(e=>e.id!=i.id);n.checklistItems=[...c,i],this._specFacade.updateChecklist(n)}getChecklistStatus(e){let t="vollst\xe4ndig";return null==e||e.forEach(e=>{switch(!0){case 0==e.checked&&0==e.relevant:t="unvollst\xe4ndig";break;case 0==e.checked&&1==e.relevant:t="T\xe4tigkeit eingeschr\xe4nkt";break;default:t="vollst\xe4ndig"}}),t}benachrichtigen(e){let t,i=e.benachrichtigen.split(",");t=`Das Checklistenelement ${e.bezeichnung} ist defekt/verbraucht und muss erneuert/ausgetauscht werden.`,t=`mailto:${i.join("; ")}?subject=Information: Checkliste zu ${this.checklist.name}&body=${t}`,window.location.href=t}create(){var e;const t=this.getChecklistStatus(this.checklist.checklistItems),i=Object.assign({},this.checklist,{id:this.patrolId,datum:(0,c.eT)("now"),status:t});this._specFacade.insertChecklist(i),null===(e=this.modal)||void 0===e||e.close()}cancel(){var e;null===(e=this.modal)||void 0===e||e.close()}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(o.C),r.Y36(a.Z))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-checklist-items"]],viewQuery:function(e,t){if(1&e&&r.Gf(f,5),2&e){let e;r.iGM(e=r.CRH())&&(t.modal=e.first)}},decls:36,vars:11,consts:[["modalComponent",""],[1,"h-16","p-8","flex","items-center","justify-between","content-center","border-b"],["tabindex","0",1,"dark:text-gray-50","focus:outline-none","text-2xl","font-semibold","leading-6","text-gray-800"],[1,"flex","flex-row","content-center"],[1,"w-6","h-6","focus:outline-none","rounded-md","cursor-pointer"],["label",""],[3,"appInfoPopup","label"],["name","question-mark",1,"w-6","h-6","stroke-2","stroke-current","text-gray-500"],["question",""],[1,"w-6","h-6","ml-2","focus:outline-none","rounded-md","cursor-pointer",3,"click"],["name","x",1,"w-6","h-6","stroke-2","stroke-current","text-gray-500"],[1,"content"],[1,"text-lg","m-3"],[1,"w-full","bg-white","rounded-lg","py-2","shadow-lg"],[1,"min-w-full","bg-white","dark:bg-gray-800",2,"width","100%"],[1,"w-full","h-12","border-gray-300","border-b","py-8"],[1,"px-2","text-gray-600","dark:text-gray-400","font-normal","text-left","text-md","tracking-normal","leading-4","hidden"],[1,"px-2","w-8","text-gray-600","dark:text-gray-400","font-normal","text-left","text-md","tracking-normal","leading-4"],[1,"text-gray-600","dark:text-gray-400","font-normal","pr-2","text-left","text-md","tracking-normal","leading-4"],["class","h-12 bg-gray-100 border-b border-gray-300",4,"ngFor","ngForOf"],["class","h-12 bg-gray-50 border-b border-gray-300",4,"ngFor","ngForOf"],[1,"absolute","h-16","px-8","right-0","bottom-0","left-0","flex","items-center","justify-between","border-t"],[4,"ngTemplateOutlet"],["toolbar",""],[1,"p-2","ml-5","mt-3","min-w-min","max-w-md","bg-gray-100","border","border-gray-400","break-words","rounded","shadow-lg"],[1,"h-12","bg-gray-100","border-b","border-gray-300"],[1,"text-sm","px-2","whitespace-no-wrap","text-gray-800","dark:text-gray-100","tracking-normal","leading-4","hidden"],[1,"px-2","text-left","whitespace-no-wrap","text-sm","text-gray-800","dark:text-gray-100","tracking-normal","leading-4"],["type","checkbox",1,"cursor-pointer","relative","w-5","h-5","border","rounded","border-gray-400","bg-white","dark:bg-gray-800","outline-none",3,"checked","change"],[1,"text-sm","pr-2","whitespace-no-wrap","text-gray-800","dark:text-gray-100","tracking-normal","leading-4",3,"ngClass"],[1,"pr-2","leading-4"],[1,"w-6","h-6"],["name","mail",1,"w-6","h-6","stroke-1","stroke-current","cursor-pointer",3,"click"],[1,"h-12","bg-gray-50","border-b","border-gray-300"],[1,"text-sm","pr-2","whitespace-no-wrap","text-gray-800","dark:text-gray-100","tracking-normal","leading-4"],["type","button",1,"p-2","mr-3","bg-gray-800","text-white","rounded",3,"click"],["type","button","class","p-2 ml-3 bg-gray-800 text-white rounded",3,"click",4,"ngIf"],["type","button",1,"p-2","ml-3","bg-gray-800","text-white","rounded",3,"click"]],template:function(e,t){if(1&e&&(r.TgZ(0,"app-modal",null,0),r.TgZ(2,"header",1),r.TgZ(3,"p",2),r._uU(4),r.qZA(),r.TgZ(5,"div",3),r.TgZ(6,"div",4,5),r.TgZ(8,"app-info-button",6),r._UZ(9,"icons",7),r.qZA(),r.YNc(10,y,2,0,"ng-template",null,8,r.W1O),r.qZA(),r.TgZ(12,"button",9),r.NdJ("click",function(){return t.cancel()}),r._UZ(13,"icons",10),r.qZA(),r.qZA(),r.qZA(),r.TgZ(14,"div",11),r.TgZ(15,"h2",12),r._uU(16),r.qZA(),r.TgZ(17,"div",13),r.TgZ(18,"table",14),r.TgZ(19,"thead"),r.TgZ(20,"tr",15),r.TgZ(21,"th",16),r._uU(22," Id "),r.qZA(),r._UZ(23,"th",17),r.TgZ(24,"th",18),r._uU(25," Bezeichnung "),r.qZA(),r._UZ(26,"th",18),r.qZA(),r.qZA(),r.TgZ(27,"tbody"),r.YNc(28,x,10,4,"tr",19),r.ALo(29,"async"),r.YNc(30,Z,8,3,"tr",20),r.ALo(31,"async"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(32,"footer",21),r.YNc(33,w,1,0,"ng-container",22),r.qZA(),r.qZA(),r.YNc(34,A,5,1,"ng-template",null,23,r.W1O)),2&e){const e=r.MAs(7),i=r.MAs(11),n=r.MAs(35);r.xp6(4),r.hij(" ",t.title," "),r.xp6(4),r.Q6J("appInfoPopup",i)("label",e),r.xp6(8),r.hij("Checkliste ",t.checklist.name,""),r.xp6(12),r.Q6J("ngForOf",r.lcZ(29,7,t.unchecked$)),r.xp6(2),r.Q6J("ngForOf",r.lcZ(31,9,t.checked$)),r.xp6(3),r.Q6J("ngTemplateOutlet",n)}},directives:[s.z,d,m,b._,k.sg,k.tP,k.mk,k.O5],pipes:[k.Ov],styles:[".content{position:absolute;top:5rem;right:2rem;bottom:4rem;left:2rem;overflow:auto;-webkit-overflow-scrolling:touch;-ms-overflow-style:-ms-autohiding-scrollbar}.content::-webkit-scrollbar{display:none}.dark .mat-form-field-ripple,.dark .mat-form-field-underline:before{background-color:#fff6!important}.dark .mat-select-value,.dark mat-label{color:#d3d3d3!important}.mat-checkbox-checked.mat-accent .mat-checkbox-background{background-color:green}.mat-checkbox-checked:not(.mat-checkbox-disabled).mat-accent .mat-ripple-element,.mat-checkbox:active:not(.mat-checkbox-disabled).mat-accent .mat-ripple-element{background:#0000}"],encapsulation:2}),e})()}}]);