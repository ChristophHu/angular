(self.webpackChunkbordbuch_wsp_final=self.webpackChunkbordbuch_wsp_final||[]).push([[322],{2322:(e,t,n)=>{"use strict";n.r(t),n.d(t,{PeilungModalComponent:()=>x});var o=n(8509),i=n(5366),a=n(1041),l=n(3063),r=n(6691),c=n(9204),u=n(959),m=n(8256),s=n(3070),d=n(9550),p=n(3841),g=n(1116),f=n(7064),h=n(2998);const Z=["modalComponent"];function b(e,t){if(1&e&&(i.TgZ(0,"mat-option",23),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e.id),i.xp6(1),i.hij(" ",e.bezeichnung," ")}}function _(e,t){1&e&&i.GkF(0)}function v(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",26),i.NdJ("click",function(){return i.CHM(e),i.oxw(2).create()}),i._uU(1,"Erstellen"),i.qZA()}}function k(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div"),i.TgZ(1,"button",24),i.NdJ("click",function(){return i.CHM(e),i.oxw().cancel()}),i._uU(2,"Abbrechen"),i.qZA(),i.qZA(),i.TgZ(3,"div"),i.YNc(4,v,2,0,"button",25),i.qZA()}if(2&e){const e=i.oxw();i.xp6(4),i.Q6J("ngIf",e.peilungForm.dirty&&!e.peilungForm.value.id)}}let x=(()=>{class e{constructor(e,t,n,o){this._formBuilder=e,this._specFacade=t,this.modalService=n,this.appService=o,this.title="",this.id_ship="",this.tanks$=this._specFacade.tanks$,this.peilungForm=this._formBuilder.group({id:[],id_schiff:[],id_tank:[],bezeichnung:[],max_vol:[],vol:[],date:[],schiffsname:[]})}ngOnInit(){this._specFacade.ship$.subscribe(e=>{this.peilungForm.patchValue({id_schiff:e.id})}),this.modalService.getData().then(e=>{this.title=e.data.title,this.peilungForm.patchValue({date:e.data.date})})}setDate(){this.peilungForm.patchValue({date:(0,o.eT)("now")}),this.peilungForm.markAsDirty()}selectTank(e){this.peilungForm.controls.id_tank.setValue(e),this._specFacade.getTankById(e).subscribe(e=>{this.peilungForm.patchValue({max_vol:null==e?void 0:e.max_vol,bezeichnung:null==e?void 0:e.bezeichnung})})}create(){var e;this._specFacade.insertPeilung(this.peilungForm.value),null===(e=this.modal)||void 0===e||e.close()}update(){}cancel(){var e;null===(e=this.modal)||void 0===e||e.close()}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(a.qu),i.Y36(l.C),i.Y36(r.Z),i.Y36(c.z))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-peilung-modal"]],viewQuery:function(e,t){if(1&e&&i.Gf(Z,5),2&e){let e;i.iGM(e=i.CRH())&&(t.modal=e.first)}},decls:49,vars:13,consts:[["modalComponent",""],[1,"h-16","p-8","flex","items-center","justify-between","border-b"],["tabindex","0",1,"dark:text-gray-50","focus:outline-none","text-2xl","font-semibold","leading-6","text-gray-800"],[1,"w-6","h-6","focus:outline-none","rounded-md","cursor-pointer",3,"click"],["name","x",1,"w-6","h-6","stroke-2","stroke-current","text-gray-500"],[1,"content"],[3,"formGroup"],[1,"hidden"],["appearance","fill"],["matInput","","type","text","formControlName","id","readonly",""],["matInput","","type","text","formControlName","id_schiff","readonly",""],["matInput","","type","text","formControlName","bezeichnung"],["formControlName","id_tank",3,"selectionChange"],["required","",3,"value",4,"ngFor","ngForOf"],[1,"flex","flex-row","items-center"],["matInput","","type","datetime-local","formControlName","date",3,"value"],[1,"w-6","h-6","mx-3","focus:outline-none","rounded-md","cursor-pointer",3,"click"],["name","calendar-event",1,"w-6","h-6","stroke-1","stroke-current","text-black"],["matInput","","type","number","formControlName","max_vol","readonly",""],["matInput","","type","number","formControlName","vol","required",""],[1,"absolute","h-16","px-8","right-0","bottom-0","left-0","flex","items-center","justify-between","border-t"],[4,"ngTemplateOutlet"],["toolbar",""],["required","",3,"value"],["type","button",1,"p-2","mr-3","bg-gray-800","text-white","rounded",3,"click"],["type","button","class","p-2 ml-3 bg-gray-800 text-white rounded",3,"click",4,"ngIf"],["type","button",1,"p-2","ml-3","bg-gray-800","text-white","rounded",3,"click"]],template:function(e,t){if(1&e&&(i.TgZ(0,"app-modal",null,0),i.TgZ(2,"header",1),i.TgZ(3,"p",2),i._uU(4),i.qZA(),i.TgZ(5,"button",3),i.NdJ("click",function(){return t.cancel()}),i._UZ(6,"icons",4),i.qZA(),i.qZA(),i.TgZ(7,"div",5),i.TgZ(8,"form",6),i.TgZ(9,"div",7),i.TgZ(10,"mat-form-field",8),i.TgZ(11,"mat-label"),i._uU(12,"id"),i.qZA(),i._UZ(13,"input",9),i.qZA(),i.TgZ(14,"mat-form-field",8),i.TgZ(15,"mat-label"),i._uU(16,"id_schiff"),i.qZA(),i._UZ(17,"input",10),i.qZA(),i.TgZ(18,"mat-form-field",8),i.TgZ(19,"mat-label"),i._uU(20,"Bezeichnung"),i.qZA(),i._UZ(21,"input",11),i.qZA(),i.qZA(),i.TgZ(22,"mat-form-field",8),i.TgZ(23,"mat-label"),i._uU(24,"Bezeichnung"),i.qZA(),i.TgZ(25,"mat-select",12),i.NdJ("selectionChange",function(e){return t.selectTank(e.value)}),i.YNc(26,b,2,2,"mat-option",13),i.ALo(27,"orderBy"),i.ALo(28,"async"),i.qZA(),i.qZA(),i.TgZ(29,"div",14),i.TgZ(30,"mat-form-field",8),i.TgZ(31,"mat-label"),i._uU(32,"Datum/Uhrzeit"),i.qZA(),i._UZ(33,"input",15),i.ALo(34,"date"),i.qZA(),i.TgZ(35,"button",16),i.NdJ("click",function(){return t.setDate()}),i._UZ(36,"icons",17),i.qZA(),i.qZA(),i.TgZ(37,"mat-form-field",8),i.TgZ(38,"mat-label"),i._uU(39,"Maximalmenge (in L)"),i.qZA(),i._UZ(40,"input",18),i.qZA(),i.TgZ(41,"mat-form-field",8),i.TgZ(42,"mat-label"),i._uU(43,"Menge (in Liter)"),i.qZA(),i._UZ(44,"input",19),i.qZA(),i.qZA(),i.qZA(),i.TgZ(45,"footer",20),i.YNc(46,_,1,0,"ng-container",21),i.qZA(),i.qZA(),i.YNc(47,k,5,1,"ng-template",null,22,i.W1O)),2&e){const e=i.MAs(48);i.xp6(4),i.hij(" ",t.title," "),i.xp6(4),i.Q6J("formGroup",t.peilungForm),i.xp6(18),i.Q6J("ngForOf",i.xi3(27,5,i.lcZ(28,8,t.tanks$),"bezeichnung")),i.xp6(7),i.s9C("value",i.xi3(34,10,t.peilungForm.value.date,"yyyy-MM-ddTHH:mm")),i.xp6(13),i.Q6J("ngTemplateOutlet",e)}},directives:[u.z,m._,a._Y,a.JL,a.sg,s.KE,s.hX,d.Nt,a.Fj,a.JJ,a.u,p.gD,g.sg,a.wV,a.Q7,g.tP,f.ey,g.O5],pipes:[h.d,g.Ov,g.uU],styles:[".content[_ngcontent-%COMP%]{position:absolute;top:8rem;right:2rem;bottom:4rem;left:2rem;overflow:auto;-webkit-overflow-scrolling:touch;-ms-overflow-style:-ms-autohiding-scrollbar}.content[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.dark[_ngcontent-%COMP%]   .mat-form-field-ripple[_ngcontent-%COMP%], .dark[_ngcontent-%COMP%]   .mat-form-field-underline[_ngcontent-%COMP%]:before{background-color:#fff6!important}.dark[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%], .dark[_ngcontent-%COMP%]   mat-label[_ngcontent-%COMP%]{color:#d3d3d3!important}"]}),e})()}}]);